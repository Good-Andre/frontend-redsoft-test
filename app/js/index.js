"use strict";const productList=document.querySelector(".main__gallery");let cart=JSON.parse(localStorage.getItem("cartTestRedsoft"))||[];function showLoader(c){c.textContent="",c.insertAdjacentHTML("beforeend",'<section class="sk-fading-circle"><div class="sk-circle sk-circle-1"></div><div class="sk-circle sk-circle-2"></div><div class="sk-circle sk-circle-3"></div><div class="sk-circle sk-circle-4"></div><div class="sk-circle sk-circle-5"></div><div class="sk-circle sk-circle-6"></div><div class="sk-circle sk-circle-7"></div><div class="sk-circle sk-circle-8"></div><div class="sk-circle sk-circle-9"></div><div class="sk-circle sk-circle-10"></div><div class="sk-circle sk-circle-11"></div><div class="sk-circle sk-circle-12"></div></section>')}function hideLoader(c){setTimeout((function(){c.classList.add("in-cart"),c.textContent="В корзине"}),1e3)}loadProducts();const getProduct=function(c,t){showLoader(c),function(c,t){let e=new XMLHttpRequest;e.open("GET",c),e.onload=function(){t(e.responseText)},e.send()}("https://reqres.in/api/unknown/"+t,(function(t){saveProduct((t=JSON.parse(t)).data),hideLoader(c)}))};function loadProducts(){const c=document.querySelectorAll(".gallery-item__btn");for(let t=0;t<c.length;t++){let e=c[t];for(let c=0;c<cart.length;c++)cart[c].id===+e.dataset.id&&(e.classList.add("in-cart"),e.textContent="В корзине")}console.log("Корзина после Загрузки из localStorage",cart)}function removeProduct(c){for(let t=0;t<cart.length;t++)cart[t].id===+c.dataset.id&&cart.splice([t],1);console.log("Корзина после Удаления элемента",cart),localStorage.setItem("cartTestRedsoft",JSON.stringify(cart))}function saveProduct(c){cart.push(c),console.log("Корзина после Добавления элемента",cart),localStorage.setItem("cartTestRedsoft",JSON.stringify(cart))}productList.addEventListener("click",(function(c){let t=c.target;if(t.classList.contains("gallery-item__btn")){const c=t;if(c.classList.contains("in-cart"))c.classList.contains("in-cart")&&(c.classList.remove("in-cart"),c.textContent="Купить",removeProduct(c));else{const t=c.dataset.id;getProduct(c,t)}}}));