"use strict";const productList=document.querySelector(".main__gallery");let cart=JSON.parse(localStorage.getItem("cartTestRedsoft"))||[];function showLoader(t){t.textContent="",t.insertAdjacentHTML("beforeend",'<section class="sk-fading-circle"><div class="sk-circle sk-circle-1"></div><div class="sk-circle sk-circle-2"></div><div class="sk-circle sk-circle-3"></div><div class="sk-circle sk-circle-4"></div><div class="sk-circle sk-circle-5"></div><div class="sk-circle sk-circle-6"></div><div class="sk-circle sk-circle-7"></div><div class="sk-circle sk-circle-8"></div><div class="sk-circle sk-circle-9"></div><div class="sk-circle sk-circle-10"></div><div class="sk-circle sk-circle-11"></div><div class="sk-circle sk-circle-12"></div></section>')}function hideLoader(t){setTimeout((function(){t.classList.add("in-cart"),t.textContent="В корзине"}),1e3)}loadProducts();const getProduct=function(t,c){showLoader(t),function(t,c){let e=new XMLHttpRequest;e.open("GET",t),e.onload=function(){c(e.responseText)},e.send()}("https://reqres.in/api/unknown/"+c,(function(c){saveProduct((c=JSON.parse(c)).data),hideLoader(t)}))};function loadProducts(){const t=document.querySelectorAll(".gallery-item__btn");for(let c=0;c<t.length;c++){let e=t[c];for(let t=0;t<cart.length;t++)cart[t].id===+e.dataset.id&&(e.classList.add("in-cart"),e.textContent="В корзине")}}function removeProduct(t){let c=cart;cart=[];for(let e=0;e<c.length;e++)c[e].id!==+t.dataset.id&&cart.push(c[e]);localStorage.setItem("cartTestRedsoft",JSON.stringify(cart))}function saveProduct(t){cart.push(t),localStorage.setItem("cartTestRedsoft",JSON.stringify(cart))}productList.addEventListener("click",(function(t){let c=t.target;if(c.classList.contains("gallery-item__btn")){const t=c;if(t.classList.contains("in-cart"))t.classList.contains("in-cart")&&(t.classList.remove("in-cart"),t.textContent="Купить",removeProduct(t));else{const c=t.dataset.id;getProduct(t,c)}}}));